tinymce.PluginManager.add("textcolor",function(e){function t(){var t,o,l=[];for(o=e.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Brown","C0C0C0","Silver","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum","FFFFFF","White"],t=0;t<o.length;t+=2)l.push({text:o[t+1],color:o[t]});return l}function o(){var o,l,n,r,c,a,i,F,d,u=this;for(o=t(),n='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="presentation" cellspacing="0"><tbody>',r=o.length-1,c=e.settings.textcolor_rows||5,a=e.settings.textcolor_cols||8,F=0;c>F;F++){for(n+="<tr>",i=0;a>i;i++)d=F*a+i,d>r?n+="<td></td>":(l=o[d],n+='<td><div id="'+u._id+"-"+d+'" data-mce-color="'+l.color+'" role="option" tabIndex="-1" style="'+(l?"background-color: #"+l.color:"")+'" title="'+l.text+'"></div></td>');n+="</tr>"}return n+='<tr><td colspan="'+a+'"><input id="'+u._id+"-"+(d+1)+'" type="text" class="mce-textbox mce-placeholder" tabindex="-1" value="#" maxlength="7"></td></tr>',n+="</tbody></table>"}function l(t){setTimeout(function(){var o=jQuery(t.control.panel.getEl()).find("input");"undefined"!=typeof t.control.color()&&o.val(t.control.color()),"undefined"==typeof o.data("events")&&(o.on("paste",function(){setTimeout(function(){o.blur()},0)}),o.on("change",function(){var l=o.val(),n=new RegExp("^#(?:[0-9a-fA-F]{3}){1,2}$");n.test(l)&&(t.control.hidePanel(),t.control.color(l),e.execCommand(t.control.settings.selectcmd,!1,l))}))},0)}function n(t){var o,l=this.parent();(o=t.target.getAttribute("data-mce-color"))&&(l.hidePanel(),o="#"+o,l.color(o),e.execCommand(l.settings.selectcmd,!1,o))}function r(){var t=this;t._color&&e.execCommand(t.settings.selectcmd,!1,t._color)}e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",selectcmd:"ForeColor",panel:{html:o,onclick:n,onshow:l},onclick:r}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",selectcmd:"HiliteColor",panel:{html:o,onclick:n},onclick:r})});